
from sys import argv
from mytiming  import *
from mycheckfiles import *




##--main --------------------------------------------------------------##


variants=[]
variants.append( ["WCSA"        ,"../../../self-indexes/collectResults/wcsa"  ,"B-LOG.dat" , "S-LOG.dat" , "N.Wa_swcsa.dat" , "N.Wb_swcsa.dat"   , "N.P2_swcsa.dat", "N.P5_swcsa.dat" ,"e.Words20_swcsa.dat" , "e.Words3000_swcsa.dat" ] )
variants.append( ["RLCSA"       ,"../../../self-indexes/collectResults/rlcsa" ,"B-LOG.dat" , "S-LOG.dat" , "Wa_rlcsa"       , "Wb_rlcsa"         , "P2_rlcsa"      , "P5_rlcsa"       ,"e80_rlcsa"           , "e13000_rlcsa"          ] )
variants.append( ["SLP"         ,"../../../self-indexes/collectResults/slp"   ,"B-LOG.dat" , "S-LOG.dat" , "slp.f1_1000"    , "slp.f1001_100k"   , "slp.2_2"       , "slp.5_5"        ,"slp.snippets80"      , "slp.snippets13000"     ] )
variants.append( ["WSLP"        ,"../../../self-indexes/collectResults/wslp"  ,"B-LOG.dat" , "S-LOG.dat" , "wslp.f1_1000"   , "wslp.f1001_100k"  , "wslp.2_2"      , "wslp.5_5"       ,"wslp.snippets80"     , "wslp.snippets13000"    ] )
variants.append( ["LZ77-Index"  ,"../../../self-indexes/collectResults/lz77"  ,"B-LOG.dat" , "S-LOG.dat" , "lz77.f1_1000"   , "lz77.f1001_100k"  , "lz77.2_2"      , "lz77.5_5"       ,"lz77.snippets80"     , "lz77.snippets13000"    ] )
variants.append( ["LZEnd-Index" ,"../../../self-indexes/collectResults/lzend" ,"B-LOG.dat" , "S-LOG.dat" , "lzend.f1_1000"  , "lzend.f1001_100k" , "lzend.2_2"     , "lzend.5_5"      ,"lzend.snippets80"    , "lzend.snippets13000"   ] )
  
#src=vbytePos[0:10] #src is a COPY of the list (which remains un-modified)
#src=rice[0:8]       #src is a COPY of the list (which remains un-modified)
#src=riceB[0:8]      #src is a COPY of the list (which remains un-modified)

header= r"""
%%%%   STATIC HEADER %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{table}[htbp]
  \scriptsize
  \centering
    \begin{tabular}{|l|r|r|c|c|c|c|c|c|}
    \cline{2-9}    \multicolumn{1}{r|}{} & \multicolumn{2}{c|}{Overall Time} &                 \multicolumn{4}{c|}{Locate}                &\multicolumn{2}{c|}{Extract} \\
    \cline{2-9}    \multicolumn{1}{r|}{} & \multicolumn{2}{c|}{            } & \multicolumn{2}{c|}{Words}  & \multicolumn{2}{c|}{Phrases} &     80   & 13,000 \\   
    \cline{2-9}    \multicolumn{1}{r|}{} &       Building & Querying         &    {Low freq} & {High freq} &    {2-words} & {5-words}     &  chars   & chars \\   
    \hline
    \hline
    %%%% CONTENTS GENERATED BY SCRIPT                            %%%%%%%%%%%%%%%%%%%%%%%%%%"""

footer= r"""%%%%   STATIC FOOTER %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
   \cline{1-3}    
   \end{tabular}%
  \caption{Summary and state of the experiments run on the test machine: self-indexes.}
  \label{ap1:self}%
\end{table}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
"""


if len(argv) !=2:
    print "Incorrect syntax! You must provide an output .tex filename"
    print "   use: python %s <filename.tex>" % argv[0]
    exit(0)

filename= argv[1]
deleteFileIfExists(filename)


#print header
addDataToLog(filename, header)

#processes all the techniques in "variants"
for t in variants:
    src=t[0:len(t)]
    
    if len(src)==8:
        src.append("none")  #no extract80-file
        src.append("none")  #no extract13000-file

    strresult= getStrIIResultIdx(src)
    
    #print strresult
    addDataToLog(filename, strresult)

    str=getElapsedTime("../../../self-indexes/SELF-LOG.dat")
    str=str.rjust(13)+" "


overall=r"""   \hline
   \textbf{OVERALL TIME }    &     \multicolumn{2}{|c|}{""" +   str + r""" }   &\multicolumn{4}{|r}{}  \\"""

#print overall
addDataToLog(filename, overall)


#print footer
addDataToLog(filename, footer)

















 
 
 
